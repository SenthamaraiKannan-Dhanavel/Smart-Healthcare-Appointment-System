<app-header></app-header>
<div class="container mt-5">
  <h1>Patient Dashboard</h1>
  <h2>Your Appointments</h2>
  <ul class="list-group">
    <li *ngFor="let appointment of appointments" class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>Doctor:</strong> Dr. {{ appointment.doctor.full_name || appointment.doctor.username }} ({{ appointment.doctor.specialty_name }})<br>
        <strong>Date:</strong> {{ formatAppointmentDate(appointment.date) }}<br>
        <strong>Reason:</strong> {{ appointment.reason }}
      </div>
      <div>
        <button class="btn btn-primary me-2" (click)="rescheduleAppointment(appointment)" [attr.aria-label]="'Reschedule appointment with Dr. ' + (appointment.doctor.full_name || appointment.doctor.username)">Reschedule</button>
        <button class="btn btn-danger" (click)="cancelAppointment(appointment.id)" [attr.aria-label]="'Cancel appointment with Dr. ' + (appointment.doctor.full_name || appointment.doctor.username)">Cancel</button>
      </div>
    </li>
  </ul>
  <p *ngIf="appointments.length === 0">No appointments scheduled.</p>
  <div class="mt-3">
    <button [routerLink]="['/book-appointment']" class="btn btn-primary">Book New Appointment</button>
  </div>
</div>
